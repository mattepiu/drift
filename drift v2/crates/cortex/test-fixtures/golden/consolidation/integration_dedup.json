{
  "description": "New consolidation overlaps with existing semantic memory â†’ should update existing rather than create duplicate",
  "input": {
    "existing_semantics": [
      {
        "id": "sem-001",
        "embedding": "PLACEHOLDER_EMBEDDING_VECTOR",
        "knowledge": "The project uses rusqlite with bundled SQLite, WAL mode enabled, mmap_size=256MB. FTS5 provides keyword search with BM25 scoring. sqlite-vec handles vector similarity search."
      }
    ],
    "memories": [
      {
        "id": "ep-080",
        "memory_type": "episodic",
        "content": { "type": "episodic", "data": { "interaction": "Added backup pragma to SQLite config. Runs incremental backup every 6 hours.", "context": "Data safety improvement", "outcome": "Incremental backup configured" } },
        "summary": "Added SQLite incremental backup every 6 hours",
        "transaction_time": "2026-01-20T10:00:00Z", "valid_time": "2026-01-20T10:00:00Z", "valid_until": null,
        "confidence": 0.85, "importance": "normal",
        "last_accessed": "2026-01-25T08:00:00Z", "access_count": 2,
        "linked_patterns": [], "linked_constraints": [], "linked_files": [], "linked_functions": [],
        "tags": ["sqlite", "backup", "storage"],
        "archived": false, "superseded_by": null, "supersedes": null, "content_hash": "hash_ep080"
      },
      {
        "id": "ep-081",
        "memory_type": "episodic",
        "content": { "type": "episodic", "data": { "interaction": "Configured SQLite page_size=4096 and cache_size=64MB for optimal read performance.", "context": "Storage tuning", "outcome": "Pragma settings optimized" } },
        "summary": "SQLite pragmas: page_size=4096, cache_size=64MB",
        "transaction_time": "2026-01-22T14:00:00Z", "valid_time": "2026-01-22T14:00:00Z", "valid_until": null,
        "confidence": 0.82, "importance": "normal",
        "last_accessed": "2026-01-25T09:00:00Z", "access_count": 3,
        "linked_patterns": [], "linked_constraints": [], "linked_files": [], "linked_functions": [],
        "tags": ["sqlite", "pragmas", "performance"],
        "archived": false, "superseded_by": null, "supersedes": null, "content_hash": "hash_ep081"
      }
    ]
  },
  "expected_output": {
    "action": "update_existing",
    "updated_semantic_id": "sem-001",
    "reason": "New consolidation has high embedding similarity with existing semantic memory",
    "similarity_threshold": 0.85,
    "created_count": 0,
    "archived_ids": ["ep-080", "ep-081"]
  }
}
