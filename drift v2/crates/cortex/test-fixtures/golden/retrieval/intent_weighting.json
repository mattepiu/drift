{
  "description": "fix_bug intent should boost tribal and incident memory types in ranking",
  "input": {
    "stored_memories": [
      {
        "id": "mem-r30",
        "memory_type": "tribal",
        "content": { "type": "tribal", "data": { "knowledge": "The connection pool timeout must be set to at least 5 seconds. Lower values cause intermittent 503 errors under load.", "severity": "critical", "warnings": ["503 errors spike during peak traffic"], "consequences": ["User-facing downtime", "SLA violations"] } },
        "summary": "Connection pool timeout must be ≥5s to avoid 503 errors under load",
        "confidence": 0.95, "importance": "critical",
        "tags": ["database", "connection-pool", "timeout"],
        "content_hash": "hash_r30"
      },
      {
        "id": "mem-r31",
        "memory_type": "incident",
        "content": { "type": "incident", "data": { "title": "Production 503 errors from pool exhaustion", "root_cause": "Connection pool timeout was 1s, too low for slow queries during peak", "resolution": "Increased timeout to 5s, added connection_timeout monitoring", "severity": "critical", "timeline": ["2026-01-15 14:00 - Alerts fired", "2026-01-15 14:15 - Root cause identified", "2026-01-15 14:20 - Fix deployed"], "lessons_learned": ["Always load test with production-like query patterns", "Monitor connection pool utilization"] } },
        "summary": "Production 503s from pool exhaustion — fixed by increasing timeout to 5s",
        "confidence": 0.93, "importance": "critical",
        "tags": ["incident", "production", "connection-pool"],
        "content_hash": "hash_r31"
      },
      {
        "id": "mem-r32",
        "memory_type": "preference",
        "content": { "type": "preference", "data": { "preference": "Use 4-space indentation in Rust files", "scope": "workspace", "value": 4 } },
        "summary": "Preference: 4-space indentation in Rust",
        "confidence": 0.80, "importance": "low",
        "tags": ["formatting", "rust"],
        "content_hash": "hash_r32"
      }
    ],
    "query": {
      "focus": "connection pool 503 errors",
      "intent": "fix_bug",
      "active_files": [],
      "budget": 2000,
      "sent_ids": []
    }
  },
  "expected_output": {
    "results_min": 2,
    "must_contain_ids": ["mem-r30", "mem-r31"],
    "must_not_contain_ids": ["mem-r32"],
    "ranking_order": ["mem-r31", "mem-r30"],
    "intent_boost": {
      "description": "fix_bug intent boosts tribal and incident memory types. Preference type gets no boost and is filtered by relevance.",
      "boosted_types": ["tribal", "incident"]
    }
  }
}
