{
  "description": "Re-ranker should reorder candidates based on 8-factor scoring (recency, importance, confidence, access frequency, file proximity, intent boost, type boost, freshness)",
  "input": {
    "stored_memories": [
      {
        "id": "mem-r90",
        "memory_type": "tribal",
        "content": { "type": "tribal", "data": { "knowledge": "Always run cargo clippy before committing. The CI will reject PRs with clippy warnings.", "severity": "high", "warnings": ["CI rejection"], "consequences": ["PR blocked"] } },
        "summary": "Run cargo clippy before commit — CI rejects clippy warnings",
        "confidence": 0.95, "importance": "high",
        "last_accessed": "2026-02-06T10:00:00Z", "access_count": 20,
        "tags": ["ci", "clippy", "workflow"],
        "content_hash": "hash_r90"
      },
      {
        "id": "mem-r91",
        "memory_type": "tribal",
        "content": { "type": "tribal", "data": { "knowledge": "Run cargo fmt before clippy. Formatting changes can introduce new clippy warnings.", "severity": "normal", "warnings": ["Order matters"], "consequences": ["False clippy warnings"] } },
        "summary": "Run cargo fmt before clippy — formatting can trigger warnings",
        "confidence": 0.70, "importance": "normal",
        "last_accessed": "2026-01-10T10:00:00Z", "access_count": 2,
        "tags": ["ci", "clippy", "formatting"],
        "content_hash": "hash_r91"
      },
      {
        "id": "mem-r92",
        "memory_type": "semantic",
        "content": { "type": "semantic", "data": { "knowledge": "The CI pipeline runs: fmt check → clippy → test → build. Each stage gates the next.", "source_episodes": ["ep-920"], "consolidation_confidence": 0.88 } },
        "summary": "CI pipeline: fmt → clippy → test → build (each gates next)",
        "confidence": 0.88, "importance": "normal",
        "last_accessed": "2026-02-01T10:00:00Z", "access_count": 8,
        "tags": ["ci", "pipeline"],
        "content_hash": "hash_r92"
      }
    ],
    "query": {
      "focus": "clippy CI workflow",
      "intent": "recall",
      "active_files": [],
      "budget": 2000,
      "sent_ids": []
    }
  },
  "expected_output": {
    "results_min": 3,
    "ranking_order": ["mem-r90", "mem-r92", "mem-r91"],
    "reranking_factors": {
      "mem-r90_boost": "highest confidence (0.95), highest importance (high), most accessed (20), most recent access",
      "mem-r92_boost": "good confidence (0.88), recent access, moderate access count",
      "mem-r91_penalty": "low confidence (0.70), stale access (Jan 10), low access count (2)"
    }
  }
}
