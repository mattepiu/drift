{
  "description": "Higher importance memories should rank above lower importance at equal similarity scores",
  "input": {
    "stored_memories": [
      {
        "id": "mem-r40",
        "memory_type": "semantic",
        "content": { "type": "semantic", "data": { "knowledge": "Database migrations must be backward-compatible. Never drop columns in the same release that removes their usage.", "source_episodes": ["ep-400"], "consolidation_confidence": 0.90 } },
        "summary": "DB migrations must be backward-compatible â€” never drop columns in same release",
        "confidence": 0.90, "importance": "critical",
        "tags": ["database", "migrations"],
        "content_hash": "hash_r40"
      },
      {
        "id": "mem-r41",
        "memory_type": "semantic",
        "content": { "type": "semantic", "data": { "knowledge": "Database migrations use sequential version numbers (v001, v002, etc). Each migration file contains up() and down() functions.", "source_episodes": ["ep-401"], "consolidation_confidence": 0.85 } },
        "summary": "DB migrations use sequential versions with up/down functions",
        "confidence": 0.85, "importance": "normal",
        "tags": ["database", "migrations"],
        "content_hash": "hash_r41"
      },
      {
        "id": "mem-r42",
        "memory_type": "semantic",
        "content": { "type": "semantic", "data": { "knowledge": "Database migration tests run against an in-memory SQLite instance for speed.", "source_episodes": ["ep-402"], "consolidation_confidence": 0.80 } },
        "summary": "Migration tests use in-memory SQLite for speed",
        "confidence": 0.80, "importance": "low",
        "tags": ["database", "migrations", "testing"],
        "content_hash": "hash_r42"
      }
    ],
    "query": {
      "focus": "database migration best practices",
      "intent": "recall",
      "active_files": [],
      "budget": 2000,
      "sent_ids": []
    }
  },
  "expected_output": {
    "results_min": 3,
    "ranking_order": ["mem-r40", "mem-r41", "mem-r42"],
    "reason": "All three match equally on topic, but critical > normal > low importance breaks the tie"
  }
}
